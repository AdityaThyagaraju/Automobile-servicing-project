{%extends "base.html"%}
{%block title%}Î± Motor Works{%endblock%}
{%block navbarlist%}
<ul class="navbar-nav ms-auto me-3">
  <li class="dropdown custom-accicon-div active d-flex justify-content-center align-items-center ">
    <a href="#" class="custom-accicon fa-solid fa-user" data-bs-toggle="dropdown" aria-expanded="false"></a>
    <div class="dropdown-menu">
        <div class="row g-0 custom-cust-card ">
            <div class="col-sm-4 gradient-custom text-center text-white"
              style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem;">
              <i class="custom-accicon-form fa-solid fa-user"></i>
              <h5>{{user.name}}</h5>
              <p>Customer</p>
              <i class="far fa-edit mb-5"></i>
            </div>
            <div class="col-sm-8">
              <div class="card-body p-4">
                <h6>Information</h6>
                <hr class="mt-0 mb-4">
                <div class="row pt-1">
                  <div class="col-6 mb-3">
                    <h6>Email</h6>
                    <p >{{user.email}}</p>
                  </div>
                  <div class="col-6 mb-3">
                    <h6>Phone</h6>
                    <p >{{user.phone}}</p>
                  </div>
                </div>
                <!-- <h6>Projects</h6>
                <hr class="mt-0 mb-4">
                <div class="row pt-1">
                  <div class="col-6 mb-3">
                    <h6>Recent</h6>
                    <p >Lorem ipsum</p>
                  </div>
                  <div class="col-6 mb-3">
                    <h6>Most Viewed</h6>
                    <p>Dolor sit amet</p>
                  </div>
                </div> -->
                <div class="d-flex justify-content-start">
                  <a href="#!"><i class="fab fa-facebook-f fa-lg me-3"></i></a>
                  <a href="#!"><i class="fab fa-twitter fa-lg me-3"></i></a>
                  <a href="#!"><i class="fab fa-instagram fa-lg"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
  </li>
  <li class="nav-item" style="padding: 0%;">
    <a class="nav-link" href="/Logout" style="display:inline-block; padding-left: 1px;">Logout</a>
  </li>
</ul>


{%endblock%}
{%block content%}
<!-- login message -->
{%with messages = get_flashed_messages()%}
{%for message in messages%}
{%if message%}
<div class="alert active fade bd-example-modal-sm modal show" role="dialog" id="loginmsgcust" style="display: block;" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-modal="true">
  <div class=" modal-dialog modal-sm d-flex ">
    <div class=" modal-content custom-modal1" >
      <button type="button" class="btn ms-auto" data-bs-dismiss="alert" >&times;</button>
      <h3 style="display: inline;">{{message[0]}} </h3>
      <hr>
      <p>{{message[1]}}</p>
    </div>
  </div>
</div>
{%endif%}
{%endfor%}
{%set messages=none%}
{%endwith%}





<div class="row">
<div class="dashboard col-sm-3" >
  <div style="position: fixed;">
    <h3 style="color: azure; margin-left: 15px">DashBoard</h3>
    <ul style=" display: inline-block; list-style: none;">
        <li>
            <a id="appointment" href="#">Add Vehicle</a>
        </li>
        <li>
            <a id = "bill" href="#">View Bill</a>
        </li>
        <li>
            <a id="payment-dash" href="#">Payment</a>
        </li>
    </ul>
  </div>
</div>
<div class="col-sm-9 d-flex justify-content-center align-items-center" id="cust-body">




<!-- init-card -->

  <!-- <div class="init-card appoint-form " id="init-card-id" >
    <h3>You have not added any vehicles recently <br> Add a vehicle right now</h3><br>
    <a href="#" class="btn btn-outline-dark" >Proceed</a>
  </div> -->


  <!-- alert-div -->


<div class="alert appoint-form hidden-small" id="request-alert" style="text-align:center">
  <h2>Welcome to Alpha Motor works</h2> 
  <br>
  <p> Take a step to schedule an appointment for your car service</p>
  <button class="btn" data-bs-dismiss="alert">Ok, Got it</button>
</div>










<!-- appointment-form -->
<div class="" style="margin-top: 150px; margin-bottom: 100px;">
<form class="request-form appoint-form appoint-form-none" id="request-form" action="/customer" method="post">
    <h3 class="d-flex justify-content-center pb-4">Book A Slot</h3>
    <!-- 2 column grid layout with text inputs for the first and last names -->
    <div class="row mb-4">
      <div class="col">
        <div class="form-floating">
          <input type="text" id="form6Example1" class="form-control" name="brand" placeholder="name@example.com"/>
          <label class="form-label" for="form6Example1">Brand</label>
        </div>
      </div>
      <div class="col">
        <div class="form-floating">
          <input type="text" id="form6Example2" class="form-control" name="model" placeholder="name@example.com"/>
          <label class="form-label" for="form6Example2">Model</label>
        </div>
      </div>
    </div>
  
    <!-- Text input -->
    <div class="form-floating mb-4">
      <input type="text" id="form6Example3" class="form-control" name="chasis_no" placeholder="name@example.com"/>
      <label class="form-label" for="form6Example3">Chasis Number</label>
    </div>
  
    <!-- Text input -->
    <!-- <div class="form-floating mb-4">
      <input type="checkbox" id="form6Example4" class="form-control" name="req_service" placeholder="name@example.com"/>
      <label class="form-label" for="form6Example4">Service Type</label>
      <input type="check">
    </div> -->
    <div class="form-control">
      <h6>Select Service</h6>
      <div class="row">
        <div class="col-sm-6">
          <input type="checkbox" id="check1" name="service" value="Oil Replace">Oil Replace
          <br>
          <input type="checkbox" id="check1" name="service" value="Air Filter">Air Filter
          <br>
          <input type="checkbox" id="check1" name="service" value="Battery">Battery
          <br>
          <input type="checkbox" id="check1" name="service" value="Spark Plug">Spark Plug
        </div>
        
        <div class="col-sm-6">
          <input type="checkbox" id="check1" name="service" value="Fuel Filter">Fuel Filter
          <br>
          <input type="checkbox" id="check1" name="service" value="Body Wash">Body Wash
          <br>
          <input type="checkbox" id="check1" name="service" value="Wheel Alignment">Wheel Alignment
          <br>
          <input type="checkbox" id="check1" name="service" value="Wheel Balance">Wheel Balance
        </div>
          
       
      </div>

    </div>
    <br>
    <!-- slot input -->
    <!-- <i class="bi bi-calendar"></i> -->
    <div class="coc-form">
      <div class="coc-block-row">
        <label class="coc-block-label" for="dateofbirth">Select Date</label>
        <div class="coc-block">
          <input class="form-control" type="date" name="seldate" id="dateofbirth">
        </div>
      </div>
    </div>
    <br>



    
    
    <!-- Message input -->
    <div class="form-floating mb-4">
      <textarea class="form-control" id="form6Example7" rows="4" placeholder="name@example.com"></textarea>
      <label class="form-label" for="form6Example7">Any Additional Request</label>
    </div>
  
    <!-- Checkbox
    <div class="form-check d-flex justify-content-center mb-4">
      <input class="form-check-input me-2" type="checkbox" value="" id="form6Example8" checked />
      <label class="form-check-label" for="form6Example8"> Create an account? </label>
    </div> -->
  
    <!-- Submit button -->
    <button type="submit" class="d-flex justify-content-center btn  btn-block mb-4" style="background-image:linear-gradient(62deg, #8EC5FC 0%, #E0C3FC 100%); width: 100%;">Place order</button>
  </form>
</div>




<!-- customer-bill -->

{%if user.bills %}
{%for bill in user.bills%}
{%if bill.payed==0%}
<div class="bill-js container appoint-form appoint-form-none">
  <div class="row">
      <div class="col-xs-12">
      <div class="invoice-title">
        <h2>Invoice</h2><h3 class="pull-right">Order # {{bill.id}}</h3>
      </div>
      <hr>
      <div class="row">
        <div class="col-xs-6">
          <address>
          <strong>Billed To:</strong><br>
            {{user.name}}<br>
            {{user.email}}<br>
          </address>
        </div>
        <div class="col-xs-6 text-right">
          <address>
            <strong>Shipped To:</strong><br>
              {{user.name}}<br>
              {{user.email}}<br>
            </address>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-6">
          <address>
            <strong>Payment Method:</strong><br>
            Cash
          </address>
        </div>
        <div class="col-xs-6 text-right">
          <address>
            <strong>Order Date:</strong><br>
            {{bill.date}}<br><br>
          </address>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title"><strong>Order summary</strong></h3>
        </div>
        <div class="panel-body">
          <div class="table-responsive">
            <table class="table table-condensed">
              <thead>
                              <tr>
                    <td><strong>Item</strong></td>
                    <td class="text-center"><strong></strong></td>
                    <td class="text-center"><strong></strong></td>
                    <td class="text-right"><strong>Price</strong></td>
                              </tr>
              </thead>
              <tbody>
                {%for item in bill.items%}
                <tr>
                  <td>{{item.name}}</td>
                  <td class="text-center"></td>
                  <td class="text-center"></td>
                  <td class="text-right">{{item.price}}</td>
                </tr>
                {%endfor%}
                <tr>
                  <td class="thick-line"></td>
                  <td class="thick-line"></td>
                  <td class="thick-line text-center"><strong>Subtotal</strong></td>
                  <td class="thick-line text-right">
                    {%set sum = 0 %}
                    {%for price in bill.items.price%}
                    {%set sum = sum + price%}
                    {%endfor%}
                    Rs{{sum}}
                  </td>
                </tr>
                <tr>
                  <td class="no-line"></td>
                  <td class="no-line"></td>
                  <td class="no-line text-center"><strong>Shipping</strong></td>
                  <td class="no-line text-right">Rs{%set rand =(range(1, 51) | random) %}</td>
                </tr>
                <tr>
                  <td class="no-line"></td>
                  <td class="no-line"></td>
                  <td class="no-line text-center"><strong>Total</strong></td>
                  <td class="no-line text-right">Rs{{sum+rand}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{%endif%}
{%endfor%}
{%else%}
<div class="bill-js appoint-form appoint-form-none justify-content-center align-items-center hidden-small" id="nothing-bill" >
  <h3>You have not added any vehicles yet, so no bills </h3>
</div>
{%endif%}

<!-- Payment -->
{%set flag=0%}
{%for bill in user.bills%}
{%if bill.payed==0%}
{%set flag=1%}
{%endif%}
{%endfor%}
{%if flag==1%}
<form class="payment-input container appoint-form appoint-form-none" id="payment-input" style="margin-top: 150px; margin-bottom: 100px;" action="/customer-payment" method="post">
  <div class="row">
      <div class="col-lg-4 mb-lg-0 mb-3">
          <div class="card p-3">
              <div class="img-box">
                  <img src="https://www.freepnglogos.com/uploads/visa-logo-download-png-21.png" alt="">
              </div>
              <div class="number">
                  <label class="fw-bold" for="">**** **** **** 1060</label>
              </div>
              <div class="d-flex align-items-center justify-content-between">
                  <small><span class="fw-bold">Expiry date:</span><span>10/16</span></small>
                  <small><span class="fw-bold">Name:</span><span>Kumar</span></small>
              </div>
          </div>
      </div>
      <div class="col-lg-4 mb-lg-0 mb-3">
          <div class="card p-3">
              <div class="img-box">
                  <img src="https://www.freepnglogos.com/uploads/mastercard-png/file-mastercard-logo-svg-wikimedia-commons-4.png"
                      alt="">
              </div>
              <div class="number">
                  <label class="fw-bold">**** **** **** 1060</label>
              </div>
              <div class="d-flex align-items-center justify-content-between">
                  <small><span class="fw-bold">Expiry date:</span><span>10/16</span></small>
                  <small><span class="fw-bold">Name:</span><span>Kumar</span></small>
              </div>
          </div>
      </div>
      <div class="col-lg-4 mb-lg-0 mb-3">
          <div class="card p-3">
              <div class="img-box">
                  <img src="https://www.freepnglogos.com/uploads/discover-png-logo/credit-cards-discover-png-logo-4.png"
                      alt="">
              </div>
              <div class="number">
                  <label class="fw-bold">**** **** **** 1060</label>
              </div>
              <div class="d-flex align-items-center justify-content-between">
                  <small><span class="fw-bold">Expiry date:</span><span>10/16</span></small>
                  <small><span class="fw-bold">Name:</span><span>Kumar</span></small>
              </div>
          </div>
      </div>
      <div class="col-12 mt-4">
          <div class="card p-3">
              <p class="mb-0 fw-bold h4">Payment Methods</p>
          </div>
      </div>
      <div class="col-12">
          <div class="card p-3">
              <div class="card-body border p-0">
                  <p>
                      <a class="btn btn-primary w-100 h-100 d-flex align-items-center justify-content-between"
                          data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="true"
                          aria-controls="collapseExample">
                          <span class="fw-bold">PayPal</span>
                          <span class="fab fa-cc-paypal">
                          </span>
                      </a>
                  </p>
                  <div class="collapse p-3 pt-0" id="collapseExample">
                      <div class="row">
                          <div class="col-8">
                              <p class="h4 mb-0">Enter Details</p>
                              <br>
                              <p class="mb-0"><span class="fw-bold">Bill Number:</span>
                              <input class="form-control" type="text"  name="billId" id="bill-id-input" >
                              </p>
                              <br>
                              <p class="mb-0"><span class="fw-bold">Price:</span>
                                <input class="form-control" type="text" name="bill-amt-cust" id="bill-amt-input" placeholder="Rs">
                              </p>
                              <br>
                              
                          </div>
                      </div>
                  </div>
              </div>
              <div class="card-body border p-0">
                  <p>
                      <a class="btn btn-primary p-2 w-100 h-100 d-flex align-items-center justify-content-between"
                          data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="true"
                          aria-controls="collapseExample">
                          <span class="fw-bold">Credit Card</span>
                          <span class="">
                              <span class="fab fa-cc-amex"></span>
                              <span class="fab fa-cc-mastercard"></span>
                              <span class="fab fa-cc-discover"></span>
                          </span>
                      </a>
                  </p>
                  <div class="collapse show p-3 pt-0" id="collapseExample">
                      <div class="row">
                          <div class="col-lg-5 mb-lg-0 mb-3">
                              <p class="h4 mb-0">Enter Details</p>
                              <br>
                              <p class="mb-0"><span class="fw-bold">Bill Number:</span>
                                <input class="form-control" type="text" name="billId" id="bill-id-input" >
                              </p>
                              <br>
                              <p class="mb-0">
                                  <span class="fw-bold">Price:</span>
                                  <input class="form-control" type="text" name="bill-amt-cust" id="bill-amt-input" placeholder="Rs" >
                              </p>
                              <br>
                          </div>
                          <div class="col-lg-7">
                              <form action="" class="form">
                                  <div class="row">
                                      <div class="col-12">
                                          <div class="form__div">
                                              <input type="text" class="form-control" placeholder=" ">
                                              <label for="" class="form__label">Card Number</label>
                                          </div>
                                      </div>

                                      <div class="col-6">
                                          <div class="form__div">
                                              <input type="text" class="form-control" placeholder=" ">
                                              <label for="" class="form__label">MM / yy</label>
                                          </div>
                                      </div>

                                      <div class="col-6">
                                          <div class="form__div">
                                              <input type="password" class="form-control" placeholder=" ">
                                              <label for="" class="form__label">cvv code</label>
                                          </div>
                                      </div>
                                      <div class="col-12">
                                          <div class="form__div">
                                              <input type="text" class="form-control" placeholder=" ">
                                              <label for="" class="form__label">name on the card</label>
                                          </div>
                                      </div>
                                      
                                  </div>
                              </form>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="col-12">
        <br>
        <label class="form-label" for="form6Example7">Feedback</label>
        <textarea class="form-control" id="form6Example7" rows="4" placeholder="Only good feedbacks,negative feedbacks will be ignored"></textarea>
      
      </div>
      <div class="col-12">
          <button class="btn btn-primary payment" type="submit"  style="background-image:linear-gradient(62deg, #8EC5FC 0%, #E0C3FC 100%);">
              Make Payment
          </button>
      </div>
      
  </div>
</form>
{%else%}
<div class="payment-input appoint-form appoint-form-none justify-content-center align-items-center hidden-small" id="nothing-payment" >
  <h3>No payment due</h3>  
</div>
{%endif%}

</div>

</div>



{%endblock%}

